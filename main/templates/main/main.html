{% extends 'base.html' %}
{% block content %}
{% load currency %}

<h1>Football Shop</h1>

<!-- Add Product button -->
<a href="{% url 'main:add_object' %}" class="btn">Add Product</a>

<hr>

<a href="{% url 'main:logout' %}">
  <button>Logout</button>
</a>

<h5>Last login session: {{ last_login }}</h5>

<!-- Filter buttons -->
<a href="?filter=all">
  <button type="button">All Products</button>
</a>
<a href="?filter=my">
  <button type="button">My Products</button>
</a>

{% if objects %}
  {% for p in objects %}
    <div style="margin-bottom:1.25rem">
      <h2>
        <a href="{% url 'main:detail_object' p.id %}">{{ p.name }}</a>
        {% if p.is_featured %}<span>★ Featured</span>{% endif %}
      </h2>

      <p>Category: {{ p.category }} | Price: {{ p.price|rupiah }}</p>

      {% if p.thumbnail %}
        <img src="{{ p.thumbnail }}" alt="{{ p.name }} thumbnail" width="150" height="100">
      {% else %}
        <img src="https://via.placeholder.com/150x100?text=No+Image" alt="No image" width="150" height="100">
      {% endif %}

      <p>{{ p.description|truncatewords:25 }}…</p>

      <a href="{% url 'main:detail_object' p.id %}" class="btn">Detail</a>
    </div>
  {% endfor %}
{% else %}
  <p>No products available yet.</p>
{% endif %}
{% endblock %}
